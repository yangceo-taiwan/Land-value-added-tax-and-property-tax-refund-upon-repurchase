<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡è³¼é€€ç¨…è©¦ç®—ç³»çµ±ï½œå®åœ‹åœ°æ”¿ï½œæ˜“ä¸åœ°æ”¿</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2c3e50;
            --brand-dark: #1A3C5C;
            --brand-gold: #C5A065;
            --accent: #e67e22;
            --light: #ecf0f1;
            --line-green: #06C755;
            --fb-blue: #1877F2;
            --google-red: #EA4335;
        }

        * { box-sizing: border-box; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f4f6f7; margin: 0; padding: 0; padding-bottom: 100px; color: #333; line-height: 1.6; }

        /* --- Header --- */
        .main-header {
            background: #FFF; padding: 20px; text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); border-top: 5px solid var(--brand-gold); margin-bottom: 20px;
        }
        .logo-group img { height: 60px; margin: 0 10px; vertical-align: middle; }
        .main-header h1 { font-size: 1.8rem; color: var(--brand-dark); margin: 10px 0 5px; font-weight: 800; letter-spacing: 1px; }
        .main-header .subtitle { color: #666; font-size: 1rem; }

        .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }

        /* --- Cards --- */
        .card {
            background: white; border-radius: 12px; padding: 25px; margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #e0e0e0;
        }
        .card-header {
            font-size: 1.2rem; color: var(--brand-dark); border-bottom: 2px solid var(--light);
            padding-bottom: 10px; margin-bottom: 20px; font-weight: 700;
            display: flex; align-items: center; justify-content: space-between;
        }

        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #555; }
        input[type="number"] {
            width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 1.1rem; text-align: right;
        }
        input[type="number"]:focus { border-color: var(--brand-gold); outline: none; box-shadow: 0 0 0 3px rgba(197, 160, 101, 0.2); }

        .unit-tag { font-size: 0.9rem; color: #fff; background:var(--brand-gold); padding:2px 8px; border-radius:4px; font-weight: normal; margin-left: 5px; }

        .btn-calc {
            width: 100%; padding: 15px; background: var(--brand-dark); color: white; border: none; border-radius: 8px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px;
        }
        .btn-calc:hover { background: #2c3e50; }

        /* --- Result Box --- */
        .result-box {
            background: #FFF8E1; border: 1px dashed var(--brand-gold); padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center;
        }
        .result-title { font-size: 1rem; color: #B7791F; margin-bottom: 5px; font-weight: bold; }
        .result-value { font-size: 2.2rem; color: #D35400; font-weight: 800; font-family: 'Consolas', monospace; }

        .tag { display: inline-block; padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; margin-left: 10px; font-weight: bold; }
        .tag-sell { background: #e8f6f3; color: #1abc9c; }
        .tag-buy { background: #fdedec; color: #e74c3c; }

        /* --- Important Notice Section --- */
        .notice-section {
            background: #fff; border-radius: 12px; padding: 25px; margin-bottom: 20px; border-top: 4px solid #C0392B;
        }
        .notice-title { color: #C0392B; font-size: 1.2rem; font-weight: bold; margin-bottom: 15px; display: flex; align-items: center; }
        .notice-content { font-size: 0.95rem; color: #444; }
        .notice-content ul { padding-left: 20px; margin: 10px 0; }
        .notice-content li { margin-bottom: 8px; }
        
        .contact-box {
            background: #EBF5FB; padding: 20px; border-radius: 8px; margin-top: 20px; border: 1px solid #AED6F1;
        }
        .contact-title { color: #2980B9; font-weight: bold; font-size: 1.1rem; margin-bottom: 10px; }

        /* --- Footer --- */
        .footer-copyright {
            text-align: center; font-size: 0.85rem; color: #999; margin-top: 30px; padding: 20px; border-top: 1px solid #eee;
        }

        /* --- FAB --- */
        .fab-container {
            position: fixed; bottom: 25px; right: 25px; 
            display: flex; flex-direction: column; gap: 12px; z-index: 1000;
        }
        .fab-btn {
            width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: white; text-decoration: none; box-shadow: 0 4px 15px rgba(0,0,0,0.25);
            transition: all 0.3s; overflow: hidden; white-space: nowrap; font-weight: bold; font-size: 0;
        }
        .fab-btn:hover { width: 160px; border-radius: 30px; font-size: 1rem; padding-left: 10px; justify-content: flex-start; }
        .fab-btn i { font-style: normal; font-size: 1.5rem; min-width: 55px; text-align: center; }
        
        .fab-line { background-color: var(--line-green); }
        .fab-review { background-color: var(--google-red); }
        .fab-fb { background-color: var(--fb-blue); }
        .fab-vip { background-color: var(--brand-gold); }

        @media (max-width: 600px) {
            .main-header h1 { font-size: 1.5rem; }
            .card { padding: 15px; }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="logo-group">
            <img src="å®åœ‹åœ°æ”¿å°é¢.jpg" alt="å®åœ‹åœ°æ”¿">
            <img src="æ˜“ä¸logo-01.jpg" alt="æ˜“ä¸åœ°æ”¿">
        </div>
        <h1>å®åœ‹åœ°æ”¿ï½œæ˜“ä¸åœ°æ”¿</h1>
        <div class="subtitle">é‡è³¼é€€ç¨…è©¦ç®—ç³»çµ± (æˆ¿åœ°åˆä¸€ / åœŸå¢ç¨…)</div>
    </header>

    <div id="app" class="container">

        <div class="card">
            <div class="card-header">
                <div>1. æˆ¿åœ°åˆä¸€ç¨… (æ–°åˆ¶)<span class="unit-tag">è¬å…ƒ</span></div>
                <span class="tag tag-sell">å…¨é¡/æ¯”ä¾‹é€€ç¨…</span>
            </div>
            
            <div class="input-group">
                <label>è³£å‡ºç¸½åƒ¹ (è¬å…ƒ)</label>
                <input type="number" v-model.number="new_sell_price" placeholder="ä¾‹ï¼š1500">
            </div>
            
            <div class="input-group">
                <label>é‡è³¼ç¸½åƒ¹ (è¬å…ƒ)</label>
                <input type="number" v-model.number="new_buy_price" placeholder="ä¾‹ï¼š2000">
            </div>
            
            <div class="input-group">
                <label>å·²ç¹³ç´(æˆ–æ‡‰ç¹³) ç¨…é¡ (è¬å…ƒ)</label>
                <input type="number" v-model.number="paid_tax" placeholder="ä¾‹ï¼š45">
            </div>

            <button class="btn-calc" @click="calcNew">è©¦ç®—é€€ç¨…é‡‘é¡</button>

            <div class="result-box" v-if="new_refund !== null">
                <div class="result-title">å¯é€€ç¨…é‡‘é¡</div>
                <div class="result-value">{{ formatWan(new_refund) }} è¬å…ƒ</div>
                <p style="font-size:0.9rem; color:#666; margin-top:10px;">
                    <span v-if="new_refund_ratio < 1">ä¾æ¯”ä¾‹é€€ç¨…ï¼š{{ (new_refund_ratio * 100).toFixed(1) }}% (è²·åƒ¹ < è³£åƒ¹)</span>
                    <span v-else>å…¨é¡é€€ç¨… (è²·åƒ¹ â‰§ è³£åƒ¹)</span>
                </p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div>2. åœŸåœ°å¢å€¼ç¨… (èˆŠåˆ¶)<span class="unit-tag">è¬å…ƒ</span></div>
                <span class="tag tag-buy">ä»¥å°æ›å¤§</span>
            </div>

            <div class="input-group">
                <label>è³£å‡ºåœŸåœ° - å…¬å‘Šç¾å€¼ç¸½é¡ (è¬å…ƒ)</label>
                <input type="number" v-model.number="old_land_val" placeholder="ä¾‹ï¼š300 (ç§»è½‰ç¾å€¼ç¸½é¡)">
            </div>
            
            <div class="input-group">
                <label>è³£å‡ºåœŸåœ° - å·²ç¹³ç´åœŸå¢ç¨… (è¬å…ƒ)</label>
                <input type="number" v-model.number="old_land_tax" placeholder="ä¾‹ï¼š20 (ç¨…å–®é‡‘é¡)">
            </div>

            <div class="input-group">
                <label>é‡è³¼åœŸåœ° - å…¬å‘Šç¾å€¼ç¸½é¡ (è¬å…ƒ)</label>
                <input type="number" v-model.number="new_land_val" placeholder="ä¾‹ï¼š400 (è²·å…¥ç•¶å¹´å…¬å‘Šç¾å€¼ Ã— é¢ç©)">
            </div>

            <button class="btn-calc" @click="calcOld">è©¦ç®—é€€ç¨…é‡‘é¡</button>

            <div class="result-box" v-if="old_refund !== null">
                <div class="result-title">å¯é€€ç¨…é‡‘é¡</div>
                <div class="result-value">{{ formatWan(old_refund) }} è¬å…ƒ</div>
                <p style="font-size:0.9rem; color:#666; margin-top:10px;" v-if="old_refund === 0">
                    ä¸ç¬¦åˆé€€ç¨…è³‡æ ¼<br>(åŸå› ï¼šé‡è³¼ç¾å€¼ ä¸è¶³æ‰£æŠµ è³£å‡ºæ·¨å€¼)
                </p>
            </div>
        </div>

        <div class="notice-section">
            <div class="notice-title">âš ï¸ é‡è¦æé†’ï¼šé‡è³¼é€€ç¨…çš„ 3 å¤§å¤©æ¢</div>
            <div class="notice-content">
                ç”³è«‹é€€ç¨…å¾Œï¼Œé‡è³¼çš„æˆ¿åœ°åœ¨ <strong>5 å¹´å…§</strong> å¿…é ˆç¬¦åˆä»¥ä¸‹è¦å®šï¼Œå¦å‰‡æœƒè¢«è¿½ç¹³åŸé€€é‚„ç¨…æ¬¾ï¼ˆä¾æ“šåœŸåœ°ç¨…æ³•ç¬¬37æ¢ï¼‰ï¼š
                <ul>
                    <li><strong>ä¸å¯ç§»è½‰</strong>ï¼šä¸èƒ½è³£æ‰ï¼Œä¹Ÿä¸èƒ½è´ˆèˆ‡çµ¦é…å¶ä»¥å¤–çš„äººã€‚</li>
                    <li><strong>ä¸å¯æ”¹ä½œå…¶ä»–ç”¨é€”</strong>ï¼šå¿…é ˆç¶­æŒè‡ªä½ï¼Œä¸èƒ½å‡ºç§Ÿã€ä¾›ç‡Ÿæ¥­ä½¿ç”¨ã€‚</li>
                    <li><strong>æˆ¶ç±ä¸å¯é·å‡º</strong>ï¼š
                        <br>(1) åœŸåœ°å¢å€¼ç¨…ï¼šæœ¬äººã€é…å¶æˆ–ç›´ç³»è¦ªå±¬è‡³å°‘ä¸€äººéœ€è¨­ç±ã€‚
                        <br>(2) æˆ¿åœ°åˆä¸€ç¨…ï¼šæœ¬äººã€é…å¶æˆ–æœªæˆå¹´å­å¥³è‡³å°‘ä¸€äººéœ€è¨­ç±ã€‚
                    </li>
                </ul>
            </div>

            <div class="contact-box">
                <div class="contact-title">ğŸ  å§”è¨—è¾¦ç† é‡è¦é ˆçŸ¥</div>
                <div class="notice-content">
                    é‡è³¼é€€ç¨…æ¶‰åŠè¤‡é›œçš„ç¨…å‹™è¦åŠƒèˆ‡æ™‚é–“é»èªå®šï¼Œè‹¥æ‚¨å¸Œæœ›ç”±æœ¬å…¬å¸å”åŠ©è¾¦ç†ï¼Œè«‹å‹™å¿…é…åˆï¼š
                    <br><br>
                    <strong>1. è«‹è¨˜å¾—ã€ŒæŒ‡å®šã€æˆ‘å€‘</strong><br>
                    åœ¨è²·è³£ç°½ç´„éšæ®µï¼Œè«‹å‘ <strong>è³£æ–¹ / å»ºè¨­å…¬å¸ / ä»²ä»‹æ¥­è€…</strong> æ˜ç¢ºè¡¨ç¤ºï¼š
                    <span style="color:#C0392B; font-weight:bold;">ã€Œæˆ‘è¦æŒ‡å®šç”±ã€å®åœ‹åœ°æ”¿/æ˜“ä¸åœ°æ”¿ã€‘è¾¦ç†ã€</span>ï¼Œæˆ‘å€‘æ‰èƒ½åæ­£è¨€é †åœ°å”åŠ©æ‚¨çˆ­å–æœ€å¤§æ¬Šç›Šï¼
                    <br><br>
                    <strong>2. å‚³è¨Šå¾Œè«‹ã€Œä¾†é›»ç¢ºèªã€ ğŸ“</strong><br>
                    æœ¬å…¬å¸å°æœ¬ç¶“ç‡Ÿï¼Œæœå‹™è¦ªåŠ›è¦ªç‚ºã€‚è‹¥æ‚¨å·²é€éç³»çµ±æˆ– Line å‚³ééœ€æ±‚ï¼Œç…©è«‹æ’¥å€‹é›»è©±é€šçŸ¥æˆ‘å€‘ï¼Œä¸¦å‘ŠçŸ¥æ‚¨çš„ Line åç¨±ï¼Œç¢ºèªè¨Šæ¯ç„¡éºæ¼ï¼Œè®“æˆ‘å€‘èƒ½ç¬¬ä¸€æ™‚é–“ç‚ºæ‚¨æœå‹™ï¼
                    <br><br>
                    <strong>è¬è¬æ‚¨çš„é…åˆï¼ğŸ™</strong>
                </div>
            </div>
        </div>

        <div class="footer-copyright">
            Â© å®åœ‹åœ°æ”¿ï½œæ˜“ä¸åœ°æ”¿ ç‰ˆæ¬Šæ‰€æœ‰<br>
            æœ¬è©¦ç®—çµæœåƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›ç¨…é¡ä»¥ç¨…ææ©Ÿé—œæ ¸å®šç‚ºæº–ã€‚
        </div>

    </div>

    <div class="fab-container">
        <a href="https://line.me/R/ti/p/@604gpqef" target="_blank" class="fab-btn fab-line" title="å®˜æ–¹ LINE">
            <i>ğŸ’¬</i> å®˜æ–¹ LINE
        </a>
        <a href="https://maps.app.goo.gl/qyKhdrKsG5QBo2BW8" target="_blank" class="fab-btn fab-review" title="Google å¥½è©•">
            <i>ğŸ“</i> Google å¥½è©•
        </a>
        <a href="https://www.facebook.com/062582589a/" target="_blank" class="fab-btn fab-fb" title="FB ç²‰çµ²å°ˆé ">
            <i>f</i> FB ç²‰çµ²é 
        </a>
        <a href="https://line.me/ti/g2/aVklWxyLP1RtfstQsslGQOlP4KViuFI7PPucdQ?utm_source=invitation&utm_medium=link_copy&utm_campaign=default" target="_blank" class="fab-btn fab-vip" title="VIP ç¤¾ç¾¤">
            <i>ğŸ‘‘</i> VIP ç¤¾ç¾¤
        </a>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                // æ–°åˆ¶ (å–®ä½ï¼šè¬å…ƒ)
                new_sell_price: null,
                new_buy_price: null,
                paid_tax: null,
                new_refund: null,
                new_refund_ratio: 0,

                // èˆŠåˆ¶ (å–®ä½ï¼šè¬å…ƒ)
                old_land_val: null,
                old_land_tax: null,
                new_land_val: null,
                old_refund: null
            },
            methods: {
                // æ ¼å¼åŒ–è¬å…ƒ (ä¿ç•™å°æ•¸é»å¾Œå…©ä½ï¼Œè‹¥æ•´æ•¸å‰‡ç„¡å°æ•¸)
                formatWan(num) {
                    if (num === null) return 0;
                    return parseFloat(num.toFixed(2)).toLocaleString();
                },
                calcNew() {
                    // å–®ä½çš†ç‚ºè¬å…ƒ
                    if (!this.new_sell_price || !this.new_buy_price || !this.paid_tax) {
                        alert("è«‹å¡«å¯«æ‰€æœ‰æˆ¿åœ°åˆä¸€ç¨…æ¬„ä½ (å–®ä½ï¼šè¬å…ƒ)");
                        return;
                    }
                    
                    let ratio = this.new_buy_price / this.new_sell_price;
                    if (ratio > 1) ratio = 1;
                    
                    this.new_refund_ratio = ratio;
                    this.new_refund = this.paid_tax * ratio;
                },
                calcOld() {
                    // å–®ä½çš†ç‚ºè¬å…ƒ
                    if (!this.old_land_val || !this.old_land_tax || !this.new_land_val) {
                        alert("è«‹å¡«å¯«æ‰€æœ‰åœŸåœ°å¢å€¼ç¨…æ¬„ä½ (å–®ä½ï¼šè¬å…ƒ)");
                        return;
                    }
                    
                    // å…¬å¼ï¼šA = é‡è³¼ç¾å€¼, B = è³£å‡ºç¾å€¼, C = å·²ç¹³ç¨…
                    // é¤˜é¡ = A - (B - C)
                    // è‹¥ é¤˜é¡ > 0ï¼Œå‰‡é€€é‚„ é¤˜é¡ï¼Œä½†ä¸Šé™ç‚º C
                    
                    let balance = this.new_land_val - (this.old_land_val - this.old_land_tax);
                    
                    if (balance <= 0) {
                        this.old_refund = 0;
                    } else {
                        this.old_refund = Math.min(balance, this.old_land_tax);
                    }
                }
            }
        });
    </script>
</body>
</html>